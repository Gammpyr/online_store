{% extends 'catalog/base.html' %}

{% block title %}Детали Продукта{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
{% include 'catalog/header.html' %}
<div class="container">
	<div class="row text-center">
		<div class="mx-auto w-50">
			<div class="card mb-4 box-shadow">
				<div class="card-header">
					<h4 class="my-0 font-weight-normal">{{product.name}}</h4>
				</div>
				<div class="card-body">
					{% if product.image %}
					<img class="img-thumbnail rounded" style="max-width: 100%; max-height: 300px;"
						 src={{product.image.url}} alt={{product.name}}>
					{% endif %}

					<p>{{product.description|linebreaks}}</p>
					<h1 class="card-title pricing-card-title mb-3">{{product.price}} ₽</h1>

					<div class="d-grid gap-2">
						<button type="button" class="btn btn-lg btn-outline-primary">Купить</button>
						<a class="btn btn-lg btn-block  btn-outline-secondary" href="{% url 'catalog:product_list' %}">Вернуться назад</a>

						{% if is_moderator or user.is_superuser or product.owner == user %}
							<br>
								<form method="post" action="{% url 'catalog:toggle_publish' product.pk %}">
									{% csrf_token %}
									<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
										<input type="radio" class="btn-check" name="is_published" id="btnradio1" autocomplete="off" value="true" {% if product.is_published %} checked {% endif %}>
										<label class="btn btn-outline-primary" for="btnradio1">Опубликовано</label>

										<input type="radio" class="btn-check" name="is_published" id="btnradio2" autocomplete="off" value="false" {% if not product.is_published %} checked {% endif %}>
										<label class="btn btn-outline-secondary" for="btnradio2">Неопубликовано</label>
									</div>
									<br>
									<button type="submit" class="btn btn-sm btn-outline-success">Сохранить</button>
								</form>
							<br>

							{% if product.owner == user or user.is_superuser%}
								<a class="btn btn-lg btn-block  btn-outline-info" href="{% url 'catalog:product_update' product.pk %}">Редактировать</a>
							{% endif %}
							<a class="btn btn-lg btn-block  btn-outline-danger" href="{% url 'catalog:product_delete' product.pk %}">Удалить</a>
						{% endif %}

					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{% endblock %}
